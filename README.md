![トップページ](https://github.com/ry-113/demo-library-management/assets/149135859/7fa95f6b-1799-4a99-963c-c27c984fc14d)

## アプリ概要・使い方
### なんのアプリ？
本の貸出システム（社内システム）  
URL: [https://library-management-demo-7e0b1.web.app/](https://library-management-demo-7e0b1.web.app/)
### コンセプト
貸出システムの導入で、アナログな手続きによる手間を無くし、学習コミュニティをより活性化させる。
### 本アプリ開発の背景
私の通う職業訓練校では本の貸出が可能で、長期休みや放課後の学習において借りた本を活用することができます。しかし、その本の貸出はバインダーに挟まれた紙の表に訓練生が貸出日や返却予定日、本のタイトルを記入して、指導員がハンコを押して承認するという大変アナログなものでした。  

私自身、紙にいちいち記入して貸出を受けるのは億劫であまり利用していなかったのと、指導員の「承認するのが面倒で本当は紙でやりたくはない」というぼやきが開発のきっかけでした。  
### メイン機能
主要な機能一覧です。
1. ユーザー認証
2. 本の登録
3. 検索・閲覧
4. 貸出・返却
5. レビュー

動画で機能とイメージを表現
#### 1. ユーザー認証
認証から新規登録までの流れを動画で
#### 2. 本の登録
本の登録、編集、削除を動画で
#### 3. 検索・閲覧
検索画面から検索して、詳細ページに行く。
#### 4. 貸出・返却
貸出して返却する
#### 5. レビュー
レビューを投稿して、レビューを見る

## 設計・デザイン
### ページ設計
```  
├── pages/
│   ├── index.vue
│   ├── firstsettings/
│   │   ├── index.vue
│   │   └── welcome.vue
│   ├── mypage/
│   │   ├── [uid].vue
│   │   └── [uid]-review.vue
│   ├── books/
│   │   ├── search.vue
│   │   ├── index.vue
│   │   ├── [genre].vue
│   │   └── [bookid]-detail.vue
│   ├── student/
│   │   └── transaction-[uid].vue
│   ├── instructor/
│   │   ├── database.vue
│   │   └── transaction.vue
│   ├── admin/
│   │   └── user-management.vue
```

### プロトタイプ制作
Figmaでプロトタイプを制作しました。  
ここでアプリのページデザインやレイアウト、ページ遷移のイメージを固めました。

(Figmaのスクリーンショットを載せる)
### Firestore設計
今回データベースはFirestoreを採用しています。コレクションとドキュメントという単位で構成されているNoSQLのデータベースです。  
以下にデータベースの概要を書きます。

1. **users**
   - ユーザー情報が格納されるコレクションです。
     - ドキュメント: 各ユーザーの一意のIDがドキュメント名となります。
       - `name`: 表示名
       - `email`: メールアドレス
       - `photo`: プロフィール画像
       - `role`: タイプ（student | instructor | admin）
       - `uid`: ドキュメント名と同じくユーザーのID

2. **books**
   - 登録された本が格納されるコレクションです。
     - ドキュメント: 各本の一意のIDがドキュメント名となります。
       - `bookid`: ドキュメント名と同じく本のID
       - `ISBN`: 本のISBN
       - `title`: 本のタイトル
       - `author`: 本の著者
       - `genre`: 本のジャンル
       - `year`: 出版年
       - `stock`: 本の在庫数
       - `imageURL`: cloud storageに保存した本の表紙画像のURL
       - `rating`: 口コミ評価
       - `description`: 本の概要説明文
       - `labels`: 本の登録時に設定されたラベル

3. **transactions**
   - 貸出・返却のリクエストや承認などの取引が格納されるコレクションです。
     - ドキュメント: 各トランザクションの一意のIDがドキュメント名となります。
       - `transactionid`: ドキュメント名と同じくトランザクションのID
       - `bookid`: 取引対象の本のID
       - `bookTitle`: 取引対象の本のタイトル
       - `uid`: 取引を開始したユーザーのID
       - `userName`: 取引を開始したユーザーの表示名
       - `userPhoto`: 取引を開始したユーザーのプロフィール画像
       - `nowdate`: 取引が作成、更新された時間
       - `duedate`: 本の返却期限  

4. **reviews**
   - アプリ上の全てのレビューが格納されるコレクションです。
     - ドキュメント: 各レビューの一意のIDがドキュメント名となります。
       - `reviewid`: ドキュメント名と同じくレビューのID
       - `bookid`: レビュー対象の本のID
       - `timestamp`: レビューの投稿時間
       - `uid`: レビューを投稿したユーザーのID
       - `username`: レビューを投稿したユーザーの表示名
       - `photo`: レビューを投稿したユーザーのプロフィール画像
       - `rating`: 評価点数
       - `title`: レビュータイトル
       - `description`: レビュー本文  

5. **genres**
   - 指導員が追加した本のジャンルを格納するコレクションです。
     - ドキュメント: 各ジャンルの一意のIDがドキュメント名となります。
       - `genreid`: ドキュメント名と同じくジャンルのID
       - `name`: ジャンルの名前  

6. **labels**
   - 指導員が追加した本のラベルを格納するコレクションです。
     - ドキュメント: 各ラベルの一意のIDがドキュメント名となります。
       - `labelid`: ドキュメント名と同じくラベルのID
       - `name`: ラベルの名前
       - `color`: ラベルの背景色
       - `isChecked`: ラベルが選択されたかどうかを判定するフラグ


## 主な使用技術
表形式で技術をまとめる

| カテゴリ        | 技術                    | 概要                                                                     |
|-----------------|-------------------------|--------------------------------------------------------------------------|
| フロントエンド  | Vue3                    | UI構築のためのJavaScriptフレームワーク。Composition APIのscript setup記法。 |
|                 | Nuxt3                   | Vue3がベースのフレームワーク。ルーティングやストアなどを簡単に使用できる |
|                 | TypeScript              | JavaScriptに静的型付け機能が付いた言語。 |
| UIデザイン      | Tailwind CSS            | ユーティリティクラスを付与してスタイリングするcssフレームワーク |
|                 | daisyUI                 | Tailwind CSSがベースのUIライブラリ。tailwindと同じくクラス名を付与してスタイリング |
|                 | Vue Datepicker          | Vue3で使える日付選択カレンダーを設置できるライブラリ。 |
|                 | vue3-carousel           | Vue3で使えるカルーセルを設置できるライブラリ。|
| データベース    | Firestore               | Firebaseが提供するデータベース機能。NoSQLのドキュメント指向型DB |
| 認証            | Firebase Authentication | Firebaseが提供する認証機能。メールアドレス、各種プロバイダで利用可能 |
| ストレージ      | Cloud Storage           | Firebaseが提供するストレージ機能。画像などのデータをクラウドストレージに保存できる|
| ホスティング    | Firebase Hosting        | Firebaseが提供するホスティング機能。Firebaseの各種機能を統合してすぐにホスティングできる |
| 全文検索        | Algolia                 | 高度な検索エンジンをwebアプリケーションに簡単に統合できる全文検索サービス |
| ビルドツール    | Vite                    | 従来のビルドツールの課題や問題点を改善し、モダンな開発環境に対応した新しいビルドツール |
| バージョン管理  | Git, Github             | 開発ソースのバージョン管理ツール |



## 工夫した点
#### Firestoreのクエリ回数を制限
#### インデックス、バッチ処理、トランザクション処理の使用
#### FirebaseやAlgoliaなどの外部サービス連携ロジックを切り離す
#### Vueのリアクティブシステムを使ったUI構築

## 苦労した点
#### 初めて使う技術が多く、ドキュメントを読みながらの実装となった
今回、FirebaseやAlgoliaなど初めて使う技術が多く、ドキュメントを読んで勉強しながらの実装となりました。結果的に、一貫性のない実装になってしまったところやパフォーマンスが悪い実装の仕方をしているところもあるかと思います。今回学んだことをさらに飛躍させて技術力を高めていきたいと思います。
#### UIライブラリのカスタマイズ
ライブラリで設置したカレンダーやカルーセルの機能やデザインをカスタムしたいときに思うようにスタイルがオーバーライドされなかったり、ドキュメントから欲しい機能を探してくるのが時間がかかってしまいました。カスタム性が高く、簡単にできるUIライブラリを選定することも重要だと学びました。
#### 修正時の影響範囲がわかりにくく、修正漏れが発生
今回の反省点として、コンポーネントの粒度が高く再利用性が低くなってしまったことがあります。似たコードが重複したり、複雑に絡み修正漏れが発生することがしばしばありました。修正時の影響範囲がどこまでなのか明確なコードにしつつ、その範囲を狭めていけるようなコードを意識したいです。

## 今後の展望
- PHP、Laravelなどのバックエンド言語、SQLを使ったDB操作を学ぶ
- Reactなどの他のフロントエンドフレームワークを学ぶ
- 基本情報技術者試験の合格を目指す